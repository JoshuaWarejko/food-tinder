{"version":3,"sources":["../../src/pages/locations/locations.module.ts","../../src/pages/locations/locations.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LocationsPage } from './locations';\n\n@NgModule({\n  declarations: [\n    LocationsPage\n  ],\n  imports: [\n    IonicPageModule.forChild(LocationsPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    LocationsPage\n  ],\n  entryComponents: []\n})\nexport class LocationsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/locations/locations.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ModalController, LoadingController } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\n\nimport { LocationsApi } from '../../providers/locationsApi/locationsApi';\nimport { ChosenLocationPage } from '../chosen-location/chosen-location';\n\n@IonicPage()\n@Component({\n    selector: 'page-locations',\n    templateUrl: 'locations.html'\n})\nexport class LocationsPage {\n    \n    results: any;\n    activeLocation: any;\n    activeIndex: any;\n    chosenLocations: any[];\n    nonChosenLocations: any[];\n    submitted: Boolean;\n    modalRef: any;\n    position: {latitude: Number, longitude: Number};\n    loading: any;\n    \n    constructor(\n        public locationsApi: LocationsApi, \n        public modalCtrl: ModalController, \n        private geolocation: Geolocation,\n        public loadingCtrl: LoadingController\n    ) {\n        this.position = {latitude: null, longitude: null};\n        this.submitted = false;\n        this.chosenLocations = [];\n        this.nonChosenLocations = [];\n        this.loading = this.loadingCtrl.create({content: \"Loading locations near you...\"});\n        this.loading.present();\n        \n        if ((<any>window).cordova) {\n            // running on device/emulator\n            this.geolocation.getCurrentPosition().then((res) => {\n                this.position.latitude = res.coords.latitude;\n                this.position.longitude = res.coords.longitude;\n                this.loadLocations(this.position.latitude, this.position.longitude);\n            }).catch((error) => {\n                console.error('Error getting location: ', error);\n            });\n            let watch = this.geolocation.watchPosition();\n            watch.subscribe((data) => {\n                if(data.coords !== undefined) {\n                    // data can be a set of coordinates, or an error (if an error occurred).\n                    this.position.latitude = data.coords.latitude;\n                    this.position.longitude = data.coords.longitude;\n                    this.loadLocations(this.position.latitude, this.position.longitude);\n                } else {\n                    console.error(\"An error occurred: \", data);\n                }\n            });\n        } else {\n            // Runs when in browser / dev mode\n            // Check if Geolocation is supported. If supported then run getCurrentPosition().\n            // If not supported, display error message in console.\n            if(navigator.geolocation) {\n                navigator.geolocation.getCurrentPosition((res) => {\n                    this.position.latitude = res.coords.latitude;\n                    this.position.longitude = res.coords.longitude;\n                    this.loadLocations(this.position.latitude, this.position.longitude);\n                }, this.showGeoError);\n            } else {\n                console.warn('Geolocation is not supported by this browser.');\n            }\n        }\n        \n    }\n    \n    loadLocations(lat, long) {\n        this.locationsApi.getLocations({latitude: lat, longitude: long}).subscribe(res => {\n            this.activeLocation = {};\n            this.activeIndex = 0;\n            this.results = res['businesses'];\n            this.activeLocation = this.results[this.activeIndex];\n            this.loading.dismiss();\n            console.log(this.results);\n        }, err => {\n            console.log(err);\n        });\n    }\n    \n    showGeoError(error) {\n        switch(error.code) {\n            case error.PERMISSION_DENIED:\n            console.error('User denied the request for Geolocation.');\n            break;\n            case error.POSITION_UNAVAILABLE:\n            console.error('Location information is unavailable.');\n            break;\n            case error.TIMEOUT:\n            console.error('The request to get user location timed out.');\n            break;\n            case error.UNKNOWN_ERROR:\n            console.error('An unknown error occurred.');\n            break;\n        }\n    }\n    \n    chooseYes() {\n        this.chosenLocations.push(this.activeLocation);\n        this.activeLocation = this.results[++this.activeIndex];\n        if(this.activeIndex % 5 == 0) {\n            const chosenIndex = Math.floor(Math.random() * this.chosenLocations.length);\n            this.openModal(chosenIndex);\n        }\n    }\n    \n    chooseNo() {\n        this.nonChosenLocations.push(this.activeLocation);\n        this.activeLocation = this.results[++this.activeIndex];\n    }\n    \n    openModal(chosenIndex) {\n        let modal = this.modalCtrl.create(ChosenLocationPage, {\n            chosenLocation: this.chosenLocations[chosenIndex]\n        });\n        modal.onDidDismiss(data => {\n            console.log('The dismissed data: ', data);\n        });\n        modal.present();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/locations/locations.ts"],"sourceRoot":""}